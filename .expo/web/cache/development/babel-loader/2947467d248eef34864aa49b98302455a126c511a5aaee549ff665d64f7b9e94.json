{"ast":null,"code":"function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nexport function assertSensorEventEnabledAsync(_x, _x2) {\n  return _assertSensorEventEnabledAsync.apply(this, arguments);\n}\nfunction _assertSensorEventEnabledAsync() {\n  _assertSensorEventEnabledAsync = _asyncToGenerator(function* (eventName, timeout) {\n    var isEnabled = yield isSensorEnabledAsync(eventName, timeout);\n    if (isEnabled) {\n      return true;\n    }\n    throw new Error(\"Cannot observe event: \".concat(eventName, \".\") + '\\nEnable device orientation in Settings > Safari > Motion & Orientation Access' + '\\nalso ensure that you are hosting with https as DeviceMotion is now a secure API on iOS Safari.');\n  });\n  return _assertSensorEventEnabledAsync.apply(this, arguments);\n}\nexport function isSensorEnabledAsync(_x3) {\n  return _isSensorEnabledAsync.apply(this, arguments);\n}\nfunction _isSensorEnabledAsync() {\n  _isSensorEnabledAsync = _asyncToGenerator(function* (eventName) {\n    var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 250;\n    if (!isIOS()) {\n      return true;\n    }\n    return new Promise(resolve => {\n      var id = setTimeout(() => {\n        window.removeEventListener(eventName, listener);\n        resolve(false);\n      }, timeout);\n      var listener = () => {\n        clearTimeout(id);\n        window.removeEventListener(eventName, listener);\n        resolve(true);\n      };\n      window.addEventListener(eventName, listener);\n    });\n  });\n  return _isSensorEnabledAsync.apply(this, arguments);\n}\nfunction isIOS() {\n  var isIOSUA = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);\n  var isIE11 = !!window['MSStream'];\n  return isIOSUA && !isIE11;\n}","map":{"version":3,"names":["assertSensorEventEnabledAsync","_x","_x2","_assertSensorEventEnabledAsync","apply","arguments","_asyncToGenerator","eventName","timeout","isEnabled","isSensorEnabledAsync","Error","concat","_x3","_isSensorEnabledAsync","length","undefined","isIOS","Promise","resolve","id","setTimeout","window","removeEventListener","listener","clearTimeout","addEventListener","isIOSUA","test","navigator","userAgent","isIE11"],"sources":["/Users/zuyax/Developer/rn-starter/node_modules/expo-sensors/src/utils/isSensorEnabledAsync.web.ts"],"sourcesContent":["type SensorEventName = 'deviceorientation' | 'devicemotion';\n\n// iOS 12.2 disables DeviceMotion by default now\n// https://github.com/w3c/deviceorientation/issues/57\nexport async function assertSensorEventEnabledAsync(\n  eventName: SensorEventName,\n  timeout?: number\n): Promise<boolean> {\n  const isEnabled = await isSensorEnabledAsync(eventName, timeout);\n  if (isEnabled) {\n    return true;\n  }\n\n  throw new Error(\n    `Cannot observe event: ${eventName}.` +\n      '\\nEnable device orientation in Settings > Safari > Motion & Orientation Access' +\n      '\\nalso ensure that you are hosting with https as DeviceMotion is now a secure API on iOS Safari.'\n  );\n}\n\n// throw error if the sensor is disabled.\nexport async function isSensorEnabledAsync(\n  eventName: SensorEventName,\n  // Initial interval tests found results on a median of\n  // devicemotion:\n  // - iPhone 7 Plus: 166.6666753590107ms\n  // - iPhone X: 166.6666753590107ms\n  // deviceorientation:\n  // -\n  //\n  // The initial launch of iOS Safari onto a page calling this API seems to take a little longer than a regular call.\n  // devicemotion:\n  // - ~35ms\n  // deviceorientation:\n  // - ~45ms\n  //\n  timeout: number = 250\n): Promise<boolean> {\n  if (!isIOS()) {\n    return true;\n  }\n\n  return new Promise(resolve => {\n    const id = setTimeout(() => {\n      window.removeEventListener(eventName, listener);\n      resolve(false);\n    }, timeout);\n\n    const listener = (): void => {\n      clearTimeout(id);\n      window.removeEventListener(eventName, listener);\n      resolve(true);\n    };\n\n    window.addEventListener(eventName, listener);\n  });\n}\n\n// https://stackoverflow.com/a/9039885/4047926\nfunction isIOS(): boolean {\n  const isIOSUA = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);\n  const isIE11 = !!window['MSStream'];\n  return isIOSUA && !isIE11;\n}\n"],"mappings":";;AAIA,gBAAsBA,6BAA6BA,CAAAC,EAAA,EAAAC,GAAA;EAAA,OAAAC,8BAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAclD,SAAAF,+BAAA;EAAAA,8BAAA,GAAAG,iBAAA,CAdM,WACLC,SAA0B,EAC1BC,OAAgB;IAEhB,IAAMC,SAAS,SAASC,oBAAoB,CAACH,SAAS,EAAEC,OAAO,CAAC;IAChE,IAAIC,SAAS,EAAE;MACb,OAAO,IAAI;;IAGb,MAAM,IAAIE,KAAK,CACb,yBAAAC,MAAA,CAAyBL,SAAS,SAChC,gFAAgF,GAChF,kGAAkG,CACrG;EACH,CAAC;EAAA,OAAAJ,8BAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAGD,gBAAsBK,oBAAoBA,CAAAG,GAAA;EAAA,OAAAC,qBAAA,CAAAV,KAAA,OAAAC,SAAA;AAAA;AAmCzC,SAAAS,sBAAA;EAAAA,qBAAA,GAAAR,iBAAA,CAnCM,WACLC,SAA0B,EAcL;IAAA,IAArBC,OAAA,GAAAH,SAAA,CAAAU,MAAA,QAAAV,SAAA,QAAAW,SAAA,GAAAX,SAAA,MAAkB,GAAG;IAErB,IAAI,CAACY,KAAK,EAAE,EAAE;MACZ,OAAO,IAAI;;IAGb,OAAO,IAAIC,OAAO,CAACC,OAAO,IAAG;MAC3B,IAAMC,EAAE,GAAGC,UAAU,CAAC,MAAK;QACzBC,MAAM,CAACC,mBAAmB,CAAChB,SAAS,EAAEiB,QAAQ,CAAC;QAC/CL,OAAO,CAAC,KAAK,CAAC;MAChB,CAAC,EAAEX,OAAO,CAAC;MAEX,IAAMgB,QAAQ,GAAGA,CAAA,KAAW;QAC1BC,YAAY,CAACL,EAAE,CAAC;QAChBE,MAAM,CAACC,mBAAmB,CAAChB,SAAS,EAAEiB,QAAQ,CAAC;QAC/CL,OAAO,CAAC,IAAI,CAAC;MACf,CAAC;MAEDG,MAAM,CAACI,gBAAgB,CAACnB,SAAS,EAAEiB,QAAQ,CAAC;IAC9C,CAAC,CAAC;EACJ,CAAC;EAAA,OAAAV,qBAAA,CAAAV,KAAA,OAAAC,SAAA;AAAA;AAGD,SAASY,KAAKA,CAAA;EACZ,IAAMU,OAAO,GAAG,qBAAqB,CAACC,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC;EAC/D,IAAMC,MAAM,GAAG,CAAC,CAACT,MAAM,CAAC,UAAU,CAAC;EACnC,OAAOK,OAAO,IAAI,CAACI,MAAM;AAC3B"},"metadata":{},"sourceType":"module","externalDependencies":[]}