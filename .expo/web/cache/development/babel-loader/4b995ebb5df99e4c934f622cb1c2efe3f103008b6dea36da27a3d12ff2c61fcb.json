{"ast":null,"code":"'use strict';\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nimport ListViewDataSource from \"./ListViewDataSource\";\nimport Platform from \"../../../exports/Platform\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport findNodeHandle from \"../../../exports/findNodeHandle\";\nimport NativeModules from \"../../../exports/NativeModules\";\nimport ScrollView from \"../../../exports/ScrollView\";\nimport ScrollResponder from \"../../../modules/ScrollResponder\";\nimport StaticRenderer from \"../StaticRenderer\";\nimport TimerMixin from 'react-timer-mixin';\nimport View from \"../../../exports/View\";\nimport cloneReferencedElement from \"./cloneReferencedElement\";\nimport createReactClass from 'create-react-class';\nimport isEmpty from \"../isEmpty\";\nvar merge = function merge() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  return Object.assign.apply(Object, [{}].concat(args));\n};\nvar RCTScrollViewManager = NativeModules.ScrollViewManager;\nvar DEFAULT_PAGE_SIZE = 1;\nvar DEFAULT_INITIAL_ROWS = 10;\nvar DEFAULT_SCROLL_RENDER_AHEAD = 1000;\nvar DEFAULT_END_REACHED_THRESHOLD = 1000;\nvar DEFAULT_SCROLL_CALLBACK_THROTTLE = 50;\nvar ListView = createReactClass({\n  displayName: 'ListView',\n  _childFrames: [],\n  _sentEndForContentLength: null,\n  _scrollComponent: null,\n  _prevRenderedRowsCount: 0,\n  _visibleRows: {},\n  scrollProperties: {},\n  mixins: [ScrollResponder.Mixin, TimerMixin],\n  statics: {\n    DataSource: ListViewDataSource\n  },\n  propTypes: _objectSpread({}, ScrollView.propTypes, {\n    dataSource: PropTypes.instanceOf(ListViewDataSource).isRequired,\n    renderSeparator: PropTypes.func,\n    renderRow: PropTypes.func.isRequired,\n    initialListSize: PropTypes.number.isRequired,\n    onEndReached: PropTypes.func,\n    onEndReachedThreshold: PropTypes.number.isRequired,\n    pageSize: PropTypes.number.isRequired,\n    renderFooter: PropTypes.func,\n    renderHeader: PropTypes.func,\n    renderSectionHeader: PropTypes.func,\n    renderScrollComponent: PropTypes.func.isRequired,\n    scrollRenderAheadDistance: PropTypes.number.isRequired,\n    onChangeVisibleRows: PropTypes.func,\n    removeClippedSubviews: PropTypes.bool,\n    stickySectionHeadersEnabled: PropTypes.bool,\n    stickyHeaderIndices: PropTypes.arrayOf(PropTypes.number).isRequired,\n    enableEmptySections: PropTypes.bool\n  }),\n  getMetrics: function getMetrics() {\n    return {\n      contentLength: this.scrollProperties.contentLength,\n      totalRows: this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount(),\n      renderedRows: this.state.curRenderedRowsCount,\n      visibleRows: Object.keys(this._visibleRows).length\n    };\n  },\n  getScrollResponder: function getScrollResponder() {\n    if (this._scrollComponent && this._scrollComponent.getScrollResponder) {\n      return this._scrollComponent.getScrollResponder();\n    }\n  },\n  getScrollableNode: function getScrollableNode() {\n    if (this._scrollComponent && this._scrollComponent.getScrollableNode) {\n      return this._scrollComponent.getScrollableNode();\n    } else {\n      return findNodeHandle(this._scrollComponent);\n    }\n  },\n  scrollTo: function scrollTo() {\n    if (this._scrollComponent && this._scrollComponent.scrollTo) {\n      var _this$_scrollComponen;\n      (_this$_scrollComponen = this._scrollComponent).scrollTo.apply(_this$_scrollComponen, arguments);\n    }\n  },\n  scrollToEnd: function scrollToEnd(options) {\n    if (this._scrollComponent) {\n      if (this._scrollComponent.scrollToEnd) {\n        this._scrollComponent.scrollToEnd(options);\n      } else {\n        console.warn('The scroll component used by the ListView does not support ' + 'scrollToEnd. Check the renderScrollComponent prop of your ListView.');\n      }\n    }\n  },\n  flashScrollIndicators: function flashScrollIndicators() {\n    if (this._scrollComponent && this._scrollComponent.flashScrollIndicators) {\n      this._scrollComponent.flashScrollIndicators();\n    }\n  },\n  setNativeProps: function setNativeProps(props) {\n    if (this._scrollComponent) {\n      this._scrollComponent.setNativeProps(props);\n    }\n  },\n  getDefaultProps: function getDefaultProps() {\n    return {\n      initialListSize: DEFAULT_INITIAL_ROWS,\n      pageSize: DEFAULT_PAGE_SIZE,\n      renderScrollComponent: function renderScrollComponent(props) {\n        return React.createElement(ScrollView, props);\n      },\n      scrollRenderAheadDistance: DEFAULT_SCROLL_RENDER_AHEAD,\n      onEndReachedThreshold: DEFAULT_END_REACHED_THRESHOLD,\n      stickySectionHeadersEnabled: Platform.OS === 'ios' || Platform.OS === 'web',\n      stickyHeaderIndices: []\n    };\n  },\n  getInitialState: function getInitialState() {\n    return {\n      curRenderedRowsCount: this.props.initialListSize,\n      highlightedRow: {}\n    };\n  },\n  getInnerViewNode: function getInnerViewNode() {\n    return this._scrollComponent.getInnerViewNode();\n  },\n  UNSAFE_componentWillMount: function UNSAFE_componentWillMount() {\n    this.scrollProperties = {\n      visibleLength: null,\n      contentLength: null,\n      offset: 0\n    };\n    this._childFrames = [];\n    this._visibleRows = {};\n    this._prevRenderedRowsCount = 0;\n    this._sentEndForContentLength = null;\n  },\n  componentDidMount: function componentDidMount() {\n    var _this = this;\n    this.requestAnimationFrame(function () {\n      _this._measureAndUpdateScrollProps();\n    });\n  },\n  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {\n    var _this2 = this;\n    if (this.props.dataSource !== nextProps.dataSource || this.props.initialListSize !== nextProps.initialListSize) {\n      this.setState(function (state, props) {\n        _this2._prevRenderedRowsCount = 0;\n        return {\n          curRenderedRowsCount: Math.min(Math.max(state.curRenderedRowsCount, props.initialListSize), props.enableEmptySections ? props.dataSource.getRowAndSectionCount() : props.dataSource.getRowCount())\n        };\n      }, function () {\n        return _this2._renderMoreRowsIfNeeded();\n      });\n    }\n  },\n  componentDidUpdate: function componentDidUpdate() {\n    var _this3 = this;\n    this.requestAnimationFrame(function () {\n      _this3._measureAndUpdateScrollProps();\n    });\n  },\n  _onRowHighlighted: function _onRowHighlighted(sectionID, rowID) {\n    this.setState({\n      highlightedRow: {\n        sectionID: sectionID,\n        rowID: rowID\n      }\n    });\n  },\n  render: function render() {\n    var bodyComponents = [];\n    var dataSource = this.props.dataSource;\n    var allRowIDs = dataSource.rowIdentities;\n    var rowCount = 0;\n    var stickySectionHeaderIndices = [];\n    var renderSectionHeader = this.props.renderSectionHeader;\n    var header = this.props.renderHeader && this.props.renderHeader();\n    var footer = this.props.renderFooter && this.props.renderFooter();\n    var totalIndex = header ? 1 : 0;\n    for (var sectionIdx = 0; sectionIdx < allRowIDs.length; sectionIdx++) {\n      var sectionID = dataSource.sectionIdentities[sectionIdx];\n      var rowIDs = allRowIDs[sectionIdx];\n      if (rowIDs.length === 0) {\n        if (this.props.enableEmptySections === undefined) {\n          var warning = require('fbjs/lib/warning');\n          warning(false, 'In next release empty section headers will be rendered.' + \" In this release you can use 'enableEmptySections' flag to render empty section headers.\");\n          continue;\n        } else {\n          var invariant = require('fbjs/lib/invariant');\n          invariant(this.props.enableEmptySections, \"In next release 'enableEmptySections' flag will be deprecated, empty section headers will always be rendered.\" + ' If empty section headers are not desirable their indices should be excluded from sectionIDs object.' + \" In this release 'enableEmptySections' may only have value 'true' to allow empty section headers rendering.\");\n        }\n      }\n      if (renderSectionHeader) {\n        var element = renderSectionHeader(dataSource.getSectionHeaderData(sectionIdx), sectionID);\n        if (element) {\n          bodyComponents.push(React.cloneElement(element, {\n            key: 's_' + sectionID\n          }));\n          if (this.props.stickySectionHeadersEnabled) {\n            stickySectionHeaderIndices.push(totalIndex);\n          }\n          totalIndex++;\n        }\n      }\n      for (var rowIdx = 0; rowIdx < rowIDs.length; rowIdx++) {\n        var rowID = rowIDs[rowIdx];\n        var comboID = sectionID + '_' + rowID;\n        var shouldUpdateRow = rowCount >= this._prevRenderedRowsCount && dataSource.rowShouldUpdate(sectionIdx, rowIdx);\n        var row = React.createElement(StaticRenderer, {\n          key: 'r_' + comboID,\n          shouldUpdate: !!shouldUpdateRow,\n          render: this.props.renderRow.bind(null, dataSource.getRowData(sectionIdx, rowIdx), sectionID, rowID, this._onRowHighlighted)\n        });\n        bodyComponents.push(row);\n        totalIndex++;\n        if (this.props.renderSeparator && (rowIdx !== rowIDs.length - 1 || sectionIdx === allRowIDs.length - 1)) {\n          var adjacentRowHighlighted = this.state.highlightedRow.sectionID === sectionID && (this.state.highlightedRow.rowID === rowID || this.state.highlightedRow.rowID === rowIDs[rowIdx + 1]);\n          var separator = this.props.renderSeparator(sectionID, rowID, adjacentRowHighlighted);\n          if (separator) {\n            bodyComponents.push(React.createElement(View, {\n              key: 's_' + comboID\n            }, separator));\n            totalIndex++;\n          }\n        }\n        if (++rowCount === this.state.curRenderedRowsCount) {\n          break;\n        }\n      }\n      if (rowCount >= this.state.curRenderedRowsCount) {\n        break;\n      }\n    }\n    var _this$props = this.props,\n      renderScrollComponent = _this$props.renderScrollComponent,\n      props = _objectWithoutPropertiesLoose(_this$props, [\"renderScrollComponent\"]);\n    if (!props.scrollEventThrottle) {\n      props.scrollEventThrottle = DEFAULT_SCROLL_CALLBACK_THROTTLE;\n    }\n    if (props.removeClippedSubviews === undefined) {\n      props.removeClippedSubviews = true;\n    }\n    _extends(props, {\n      onScroll: this._onScroll,\n      stickyHeaderIndices: this.props.stickyHeaderIndices.concat(stickySectionHeaderIndices),\n      onKeyboardWillShow: undefined,\n      onKeyboardWillHide: undefined,\n      onKeyboardDidShow: undefined,\n      onKeyboardDidHide: undefined\n    });\n    return cloneReferencedElement(renderScrollComponent(props), {\n      ref: this._setScrollComponentRef,\n      onContentSizeChange: this._onContentSizeChange,\n      onLayout: this._onLayout,\n      DEPRECATED_sendUpdatedChildFrames: typeof props.onChangeVisibleRows !== undefined\n    }, header, bodyComponents, footer);\n  },\n  _measureAndUpdateScrollProps: function _measureAndUpdateScrollProps() {\n    var scrollComponent = this.getScrollResponder();\n    if (!scrollComponent || !scrollComponent.getInnerViewNode) {\n      return;\n    }\n    RCTScrollViewManager && RCTScrollViewManager.calculateChildFrames && RCTScrollViewManager.calculateChildFrames(findNodeHandle(scrollComponent), this._updateVisibleRows);\n  },\n  _setScrollComponentRef: function _setScrollComponentRef(scrollComponent) {\n    this._scrollComponent = scrollComponent;\n  },\n  _onContentSizeChange: function _onContentSizeChange(width, height) {\n    var contentLength = !this.props.horizontal ? height : width;\n    if (contentLength !== this.scrollProperties.contentLength) {\n      this.scrollProperties.contentLength = contentLength;\n      this._updateVisibleRows();\n      this._renderMoreRowsIfNeeded();\n    }\n    this.props.onContentSizeChange && this.props.onContentSizeChange(width, height);\n  },\n  _onLayout: function _onLayout(event) {\n    var _event$nativeEvent$la = event.nativeEvent.layout,\n      width = _event$nativeEvent$la.width,\n      height = _event$nativeEvent$la.height;\n    var visibleLength = !this.props.horizontal ? height : width;\n    if (visibleLength !== this.scrollProperties.visibleLength) {\n      this.scrollProperties.visibleLength = visibleLength;\n      this._updateVisibleRows();\n      this._renderMoreRowsIfNeeded();\n    }\n    this.props.onLayout && this.props.onLayout(event);\n  },\n  _maybeCallOnEndReached: function _maybeCallOnEndReached(event) {\n    if (this.props.onEndReached && this.scrollProperties.contentLength !== this._sentEndForContentLength && this._getDistanceFromEnd(this.scrollProperties) < this.props.onEndReachedThreshold && this.state.curRenderedRowsCount === (this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount())) {\n      this._sentEndForContentLength = this.scrollProperties.contentLength;\n      this.props.onEndReached(event);\n      return true;\n    }\n    return false;\n  },\n  _renderMoreRowsIfNeeded: function _renderMoreRowsIfNeeded() {\n    if (this.scrollProperties.contentLength === null || this.scrollProperties.visibleLength === null || this.state.curRenderedRowsCount === (this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount())) {\n      this._maybeCallOnEndReached();\n      return;\n    }\n    var distanceFromEnd = this._getDistanceFromEnd(this.scrollProperties);\n    if (distanceFromEnd < this.props.scrollRenderAheadDistance) {\n      this._pageInNewRows();\n    }\n  },\n  _pageInNewRows: function _pageInNewRows() {\n    var _this4 = this;\n    this.setState(function (state, props) {\n      var rowsToRender = Math.min(state.curRenderedRowsCount + props.pageSize, props.enableEmptySections ? props.dataSource.getRowAndSectionCount() : props.dataSource.getRowCount());\n      _this4._prevRenderedRowsCount = state.curRenderedRowsCount;\n      return {\n        curRenderedRowsCount: rowsToRender\n      };\n    }, function () {\n      _this4._measureAndUpdateScrollProps();\n      _this4._prevRenderedRowsCount = _this4.state.curRenderedRowsCount;\n    });\n  },\n  _getDistanceFromEnd: function _getDistanceFromEnd(scrollProperties) {\n    return scrollProperties.contentLength - scrollProperties.visibleLength - scrollProperties.offset;\n  },\n  _updateVisibleRows: function _updateVisibleRows(updatedFrames) {\n    var _this5 = this;\n    if (!this.props.onChangeVisibleRows) {\n      return;\n    }\n    if (updatedFrames) {\n      updatedFrames.forEach(function (newFrame) {\n        _this5._childFrames[newFrame.index] = merge(newFrame);\n      });\n    }\n    var isVertical = !this.props.horizontal;\n    var dataSource = this.props.dataSource;\n    var visibleMin = this.scrollProperties.offset;\n    var visibleMax = visibleMin + this.scrollProperties.visibleLength;\n    var allRowIDs = dataSource.rowIdentities;\n    var header = this.props.renderHeader && this.props.renderHeader();\n    var totalIndex = header ? 1 : 0;\n    var visibilityChanged = false;\n    var changedRows = {};\n    for (var sectionIdx = 0; sectionIdx < allRowIDs.length; sectionIdx++) {\n      var rowIDs = allRowIDs[sectionIdx];\n      if (rowIDs.length === 0) {\n        continue;\n      }\n      var sectionID = dataSource.sectionIdentities[sectionIdx];\n      if (this.props.renderSectionHeader) {\n        totalIndex++;\n      }\n      var visibleSection = this._visibleRows[sectionID];\n      if (!visibleSection) {\n        visibleSection = {};\n      }\n      for (var rowIdx = 0; rowIdx < rowIDs.length; rowIdx++) {\n        var rowID = rowIDs[rowIdx];\n        var frame = this._childFrames[totalIndex];\n        totalIndex++;\n        if (this.props.renderSeparator && (rowIdx !== rowIDs.length - 1 || sectionIdx === allRowIDs.length - 1)) {\n          totalIndex++;\n        }\n        if (!frame) {\n          break;\n        }\n        var rowVisible = visibleSection[rowID];\n        var min = isVertical ? frame.y : frame.x;\n        var max = min + (isVertical ? frame.height : frame.width);\n        if (!min && !max || min === max) {\n          break;\n        }\n        if (min > visibleMax || max < visibleMin) {\n          if (rowVisible) {\n            visibilityChanged = true;\n            delete visibleSection[rowID];\n            if (!changedRows[sectionID]) {\n              changedRows[sectionID] = {};\n            }\n            changedRows[sectionID][rowID] = false;\n          }\n        } else if (!rowVisible) {\n          visibilityChanged = true;\n          visibleSection[rowID] = true;\n          if (!changedRows[sectionID]) {\n            changedRows[sectionID] = {};\n          }\n          changedRows[sectionID][rowID] = true;\n        }\n      }\n      if (!isEmpty(visibleSection)) {\n        this._visibleRows[sectionID] = visibleSection;\n      } else if (this._visibleRows[sectionID]) {\n        delete this._visibleRows[sectionID];\n      }\n    }\n    visibilityChanged && this.props.onChangeVisibleRows(this._visibleRows, changedRows);\n  },\n  _onScroll: function _onScroll(e) {\n    var isVertical = !this.props.horizontal;\n    this.scrollProperties.visibleLength = e.nativeEvent.layoutMeasurement[isVertical ? 'height' : 'width'];\n    this.scrollProperties.contentLength = e.nativeEvent.contentSize[isVertical ? 'height' : 'width'];\n    this.scrollProperties.offset = e.nativeEvent.contentOffset[isVertical ? 'y' : 'x'];\n    this._updateVisibleRows(e.nativeEvent.updatedChildFrames);\n    if (!this._maybeCallOnEndReached(e)) {\n      this._renderMoreRowsIfNeeded();\n    }\n    if (this.props.onEndReached && this._getDistanceFromEnd(this.scrollProperties) > this.props.onEndReachedThreshold) {\n      this._sentEndForContentLength = null;\n    }\n    this.props.onScroll && this.props.onScroll(e);\n  }\n});\nexport default ListView;","map":{"version":3,"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","_objectSpread","ownKeys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","_defineProperty","obj","value","defineProperty","configurable","writable","ListViewDataSource","Platform","React","PropTypes","findNodeHandle","NativeModules","ScrollView","ScrollResponder","StaticRenderer","TimerMixin","View","cloneReferencedElement","createReactClass","isEmpty","merge","_len","args","Array","_key","RCTScrollViewManager","ScrollViewManager","DEFAULT_PAGE_SIZE","DEFAULT_INITIAL_ROWS","DEFAULT_SCROLL_RENDER_AHEAD","DEFAULT_END_REACHED_THRESHOLD","DEFAULT_SCROLL_CALLBACK_THROTTLE","ListView","displayName","_childFrames","_sentEndForContentLength","_scrollComponent","_prevRenderedRowsCount","_visibleRows","scrollProperties","mixins","Mixin","statics","DataSource","propTypes","dataSource","instanceOf","isRequired","renderSeparator","func","renderRow","initialListSize","number","onEndReached","onEndReachedThreshold","pageSize","renderFooter","renderHeader","renderSectionHeader","renderScrollComponent","scrollRenderAheadDistance","onChangeVisibleRows","removeClippedSubviews","bool","stickySectionHeadersEnabled","stickyHeaderIndices","arrayOf","enableEmptySections","getMetrics","contentLength","totalRows","props","getRowAndSectionCount","getRowCount","renderedRows","state","curRenderedRowsCount","visibleRows","getScrollResponder","getScrollableNode","scrollTo","_this$_scrollComponen","scrollToEnd","options","console","warn","flashScrollIndicators","setNativeProps","getDefaultProps","createElement","OS","getInitialState","highlightedRow","getInnerViewNode","UNSAFE_componentWillMount","visibleLength","offset","componentDidMount","_this","requestAnimationFrame","_measureAndUpdateScrollProps","UNSAFE_componentWillReceiveProps","nextProps","_this2","setState","Math","min","max","_renderMoreRowsIfNeeded","componentDidUpdate","_this3","_onRowHighlighted","sectionID","rowID","render","bodyComponents","allRowIDs","rowIdentities","rowCount","stickySectionHeaderIndices","header","footer","totalIndex","sectionIdx","sectionIdentities","rowIDs","undefined","warning","require","invariant","element","getSectionHeaderData","push","cloneElement","rowIdx","comboID","shouldUpdateRow","rowShouldUpdate","row","shouldUpdate","getRowData","adjacentRowHighlighted","separator","_this$props","scrollEventThrottle","onScroll","_onScroll","onKeyboardWillShow","onKeyboardWillHide","onKeyboardDidShow","onKeyboardDidHide","ref","_setScrollComponentRef","onContentSizeChange","_onContentSizeChange","onLayout","_onLayout","DEPRECATED_sendUpdatedChildFrames","scrollComponent","calculateChildFrames","_updateVisibleRows","width","height","horizontal","event","_event$nativeEvent$la","nativeEvent","layout","_maybeCallOnEndReached","_getDistanceFromEnd","distanceFromEnd","_pageInNewRows","_this4","rowsToRender","updatedFrames","_this5","newFrame","index","isVertical","visibleMin","visibleMax","visibilityChanged","changedRows","visibleSection","frame","rowVisible","y","x","e","layoutMeasurement","contentSize","contentOffset","updatedChildFrames"],"sources":["/Users/zuyax/Developer/rn-starter/node_modules/react-native-web/dist/vendor/react-native/ListView/index.js"],"sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @providesModule ListView\n * \n * @format\n */\n'use strict';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ListViewDataSource from './ListViewDataSource';\nimport Platform from '../../../exports/Platform';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport findNodeHandle from '../../../exports/findNodeHandle';\nimport NativeModules from '../../../exports/NativeModules';\nimport ScrollView from '../../../exports/ScrollView';\nimport ScrollResponder from '../../../modules/ScrollResponder';\nimport StaticRenderer from '../StaticRenderer';\nimport TimerMixin from 'react-timer-mixin';\nimport View from '../../../exports/View';\nimport cloneReferencedElement from './cloneReferencedElement';\nimport createReactClass from 'create-react-class';\nimport isEmpty from '../isEmpty';\n\nvar merge = function merge() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return Object.assign.apply(Object, [{}].concat(args));\n};\n\nvar RCTScrollViewManager = NativeModules.ScrollViewManager;\nvar DEFAULT_PAGE_SIZE = 1;\nvar DEFAULT_INITIAL_ROWS = 10;\nvar DEFAULT_SCROLL_RENDER_AHEAD = 1000;\nvar DEFAULT_END_REACHED_THRESHOLD = 1000;\nvar DEFAULT_SCROLL_CALLBACK_THROTTLE = 50;\n/**\n * DEPRECATED - use one of the new list components, such as [`FlatList`](docs/flatlist.html)\n * or [`SectionList`](docs/sectionlist.html) for bounded memory use, fewer bugs,\n * better performance, an easier to use API, and more features. Check out this\n * [blog post](https://facebook.github.io/react-native/blog/2017/03/13/better-list-views.html)\n * for more details.\n *\n * ListView - A core component designed for efficient display of vertically\n * scrolling lists of changing data. The minimal API is to create a\n * [`ListView.DataSource`](docs/listviewdatasource.html), populate it with a simple\n * array of data blobs, and instantiate a `ListView` component with that data\n * source and a `renderRow` callback which takes a blob from the data array and\n * returns a renderable component.\n *\n * Minimal example:\n *\n * ```\n * class MyComponent extends Component {\n *   constructor() {\n *     super();\n *     const ds = new ListView.DataSource({rowHasChanged: (r1, r2) => r1 !== r2});\n *     this.state = {\n *       dataSource: ds.cloneWithRows(['row 1', 'row 2']),\n *     };\n *   }\n *\n *   render() {\n *     return (\n *       <ListView\n *         dataSource={this.state.dataSource}\n *         renderRow={(rowData) => <Text>{rowData}</Text>}\n *       />\n *     );\n *   }\n * }\n * ```\n *\n * ListView also supports more advanced features, including sections with sticky\n * section headers, header and footer support, callbacks on reaching the end of\n * the available data (`onEndReached`) and on the set of rows that are visible\n * in the device viewport change (`onChangeVisibleRows`), and several\n * performance optimizations.\n *\n * There are a few performance operations designed to make ListView scroll\n * smoothly while dynamically loading potentially very large (or conceptually\n * infinite) data sets:\n *\n *  * Only re-render changed rows - the rowHasChanged function provided to the\n *    data source tells the ListView if it needs to re-render a row because the\n *    source data has changed - see ListViewDataSource for more details.\n *\n *  * Rate-limited row rendering - By default, only one row is rendered per\n *    event-loop (customizable with the `pageSize` prop). This breaks up the\n *    work into smaller chunks to reduce the chance of dropping frames while\n *    rendering rows.\n */\n\nvar ListView = createReactClass({\n  displayName: 'ListView',\n  _childFrames: [],\n  _sentEndForContentLength: null,\n  _scrollComponent: null,\n  _prevRenderedRowsCount: 0,\n  _visibleRows: {},\n  scrollProperties: {},\n  mixins: [ScrollResponder.Mixin, TimerMixin],\n  statics: {\n    DataSource: ListViewDataSource\n  },\n\n  /**\n   * You must provide a renderRow function. If you omit any of the other render\n   * functions, ListView will simply skip rendering them.\n   *\n   * - renderRow(rowData, sectionID, rowID, highlightRow);\n   * - renderSectionHeader(sectionData, sectionID);\n   */\n  propTypes: _objectSpread({}, ScrollView.propTypes, {\n    /**\n     * An instance of [ListView.DataSource](docs/listviewdatasource.html) to use\n     */\n    dataSource: PropTypes.instanceOf(ListViewDataSource).isRequired,\n\n    /**\n     * (sectionID, rowID, adjacentRowHighlighted) => renderable\n     *\n     * If provided, a renderable component to be rendered as the separator\n     * below each row but not the last row if there is a section header below.\n     * Take a sectionID and rowID of the row above and whether its adjacent row\n     * is highlighted.\n     */\n    renderSeparator: PropTypes.func,\n\n    /**\n     * (rowData, sectionID, rowID, highlightRow) => renderable\n     *\n     * Takes a data entry from the data source and its ids and should return\n     * a renderable component to be rendered as the row. By default the data\n     * is exactly what was put into the data source, but it's also possible to\n     * provide custom extractors. ListView can be notified when a row is\n     * being highlighted by calling `highlightRow(sectionID, rowID)`. This\n     * sets a boolean value of adjacentRowHighlighted in renderSeparator, allowing you\n     * to control the separators above and below the highlighted row. The highlighted\n     * state of a row can be reset by calling highlightRow(null).\n     */\n    renderRow: PropTypes.func.isRequired,\n\n    /**\n     * How many rows to render on initial component mount. Use this to make\n     * it so that the first screen worth of data appears at one time instead of\n     * over the course of multiple frames.\n     */\n    initialListSize: PropTypes.number.isRequired,\n\n    /**\n     * Called when all rows have been rendered and the list has been scrolled\n     * to within onEndReachedThreshold of the bottom. The native scroll\n     * event is provided.\n     */\n    onEndReached: PropTypes.func,\n\n    /**\n     * Threshold in pixels (virtual, not physical) for calling onEndReached.\n     */\n    onEndReachedThreshold: PropTypes.number.isRequired,\n\n    /**\n     * Number of rows to render per event loop. Note: if your 'rows' are actually\n     * cells, i.e. they don't span the full width of your view (as in the\n     * ListViewGridLayoutExample), you should set the pageSize to be a multiple\n     * of the number of cells per row, otherwise you're likely to see gaps at\n     * the edge of the ListView as new pages are loaded.\n     */\n    pageSize: PropTypes.number.isRequired,\n\n    /**\n     * () => renderable\n     *\n     * The header and footer are always rendered (if these props are provided)\n     * on every render pass. If they are expensive to re-render, wrap them\n     * in StaticContainer or other mechanism as appropriate. Footer is always\n     * at the bottom of the list, and header at the top, on every render pass.\n     * In a horizontal ListView, the header is rendered on the left and the\n     * footer on the right.\n     */\n    renderFooter: PropTypes.func,\n    renderHeader: PropTypes.func,\n\n    /**\n     * (sectionData, sectionID) => renderable\n     *\n     * If provided, a header is rendered for this section.\n     */\n    renderSectionHeader: PropTypes.func,\n\n    /**\n     * (props) => renderable\n     *\n     * A function that returns the scrollable component in which the list rows\n     * are rendered. Defaults to returning a ScrollView with the given props.\n     */\n    renderScrollComponent: PropTypes.func.isRequired,\n\n    /**\n     * How early to start rendering rows before they come on screen, in\n     * pixels.\n     */\n    scrollRenderAheadDistance: PropTypes.number.isRequired,\n\n    /**\n     * (visibleRows, changedRows) => void\n     *\n     * Called when the set of visible rows changes. `visibleRows` maps\n     * { sectionID: { rowID: true }} for all the visible rows, and\n     * `changedRows` maps { sectionID: { rowID: true | false }} for the rows\n     * that have changed their visibility, with true indicating visible, and\n     * false indicating the view has moved out of view.\n     */\n    onChangeVisibleRows: PropTypes.func,\n\n    /**\n     * A performance optimization for improving scroll perf of\n     * large lists, used in conjunction with overflow: 'hidden' on the row\n     * containers. This is enabled by default.\n     */\n    removeClippedSubviews: PropTypes.bool,\n\n    /**\n     * Makes the sections headers sticky. The sticky behavior means that it\n     * will scroll with the content at the top of the section until it reaches\n     * the top of the screen, at which point it will stick to the top until it\n     * is pushed off the screen by the next section header. This property is\n     * not supported in conjunction with `horizontal={true}`. Only enabled by\n     * default on iOS because of typical platform standards.\n     */\n    stickySectionHeadersEnabled: PropTypes.bool,\n\n    /**\n     * An array of child indices determining which children get docked to the\n     * top of the screen when scrolling. For example, passing\n     * `stickyHeaderIndices={[0]}` will cause the first child to be fixed to the\n     * top of the scroll view. This property is not supported in conjunction\n     * with `horizontal={true}`.\n     */\n    stickyHeaderIndices: PropTypes.arrayOf(PropTypes.number).isRequired,\n\n    /**\n     * Flag indicating whether empty section headers should be rendered. In the future release\n     * empty section headers will be rendered by default, and the flag will be deprecated.\n     * If empty sections are not desired to be rendered their indices should be excluded from sectionID object.\n     */\n    enableEmptySections: PropTypes.bool\n  }),\n\n  /**\n   * Exports some data, e.g. for perf investigations or analytics.\n   */\n  getMetrics: function getMetrics() {\n    return {\n      contentLength: this.scrollProperties.contentLength,\n      totalRows: this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount(),\n      renderedRows: this.state.curRenderedRowsCount,\n      visibleRows: Object.keys(this._visibleRows).length\n    };\n  },\n\n  /**\n   * Provides a handle to the underlying scroll responder.\n   * Note that `this._scrollComponent` might not be a `ScrollView`, so we\n   * need to check that it responds to `getScrollResponder` before calling it.\n   */\n  getScrollResponder: function getScrollResponder() {\n    if (this._scrollComponent && this._scrollComponent.getScrollResponder) {\n      return this._scrollComponent.getScrollResponder();\n    }\n  },\n  getScrollableNode: function getScrollableNode() {\n    if (this._scrollComponent && this._scrollComponent.getScrollableNode) {\n      return this._scrollComponent.getScrollableNode();\n    } else {\n      return findNodeHandle(this._scrollComponent);\n    }\n  },\n\n  /**\n   * Scrolls to a given x, y offset, either immediately or with a smooth animation.\n   *\n   * See `ScrollView#scrollTo`.\n   */\n  scrollTo: function scrollTo() {\n    if (this._scrollComponent && this._scrollComponent.scrollTo) {\n      var _this$_scrollComponen;\n\n      (_this$_scrollComponen = this._scrollComponent).scrollTo.apply(_this$_scrollComponen, arguments);\n    }\n  },\n\n  /**\n   * If this is a vertical ListView scrolls to the bottom.\n   * If this is a horizontal ListView scrolls to the right.\n   *\n   * Use `scrollToEnd({animated: true})` for smooth animated scrolling,\n   * `scrollToEnd({animated: false})` for immediate scrolling.\n   * If no options are passed, `animated` defaults to true.\n   *\n   * See `ScrollView#scrollToEnd`.\n   */\n  scrollToEnd: function scrollToEnd(options) {\n    if (this._scrollComponent) {\n      if (this._scrollComponent.scrollToEnd) {\n        this._scrollComponent.scrollToEnd(options);\n      } else {\n        console.warn('The scroll component used by the ListView does not support ' + 'scrollToEnd. Check the renderScrollComponent prop of your ListView.');\n      }\n    }\n  },\n\n  /**\n   * Displays the scroll indicators momentarily.\n   *\n   * @platform ios\n   */\n  flashScrollIndicators: function flashScrollIndicators() {\n    if (this._scrollComponent && this._scrollComponent.flashScrollIndicators) {\n      this._scrollComponent.flashScrollIndicators();\n    }\n  },\n  setNativeProps: function setNativeProps(props) {\n    if (this._scrollComponent) {\n      this._scrollComponent.setNativeProps(props);\n    }\n  },\n\n  /**\n   * React life cycle hooks.\n   */\n  getDefaultProps: function getDefaultProps() {\n    return {\n      initialListSize: DEFAULT_INITIAL_ROWS,\n      pageSize: DEFAULT_PAGE_SIZE,\n      renderScrollComponent: function renderScrollComponent(props) {\n        return React.createElement(ScrollView, props);\n      },\n      scrollRenderAheadDistance: DEFAULT_SCROLL_RENDER_AHEAD,\n      onEndReachedThreshold: DEFAULT_END_REACHED_THRESHOLD,\n      stickySectionHeadersEnabled: Platform.OS === 'ios' || Platform.OS === 'web',\n      stickyHeaderIndices: []\n    };\n  },\n  getInitialState: function getInitialState() {\n    return {\n      curRenderedRowsCount: this.props.initialListSize,\n      highlightedRow: {}\n    };\n  },\n  getInnerViewNode: function getInnerViewNode() {\n    return this._scrollComponent.getInnerViewNode();\n  },\n  UNSAFE_componentWillMount: function UNSAFE_componentWillMount() {\n    // this data should never trigger a render pass, so don't put in state\n    this.scrollProperties = {\n      visibleLength: null,\n      contentLength: null,\n      offset: 0\n    };\n    this._childFrames = [];\n    this._visibleRows = {};\n    this._prevRenderedRowsCount = 0;\n    this._sentEndForContentLength = null;\n  },\n  componentDidMount: function componentDidMount() {\n    var _this = this;\n\n    // do this in animation frame until componentDidMount actually runs after\n    // the component is laid out\n    this.requestAnimationFrame(function () {\n      _this._measureAndUpdateScrollProps();\n    });\n  },\n  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {\n    var _this2 = this;\n\n    if (this.props.dataSource !== nextProps.dataSource || this.props.initialListSize !== nextProps.initialListSize) {\n      this.setState(function (state, props) {\n        _this2._prevRenderedRowsCount = 0;\n        return {\n          curRenderedRowsCount: Math.min(Math.max(state.curRenderedRowsCount, props.initialListSize), props.enableEmptySections ? props.dataSource.getRowAndSectionCount() : props.dataSource.getRowCount())\n        };\n      }, function () {\n        return _this2._renderMoreRowsIfNeeded();\n      });\n    }\n  },\n  componentDidUpdate: function componentDidUpdate() {\n    var _this3 = this;\n\n    this.requestAnimationFrame(function () {\n      _this3._measureAndUpdateScrollProps();\n    });\n  },\n  _onRowHighlighted: function _onRowHighlighted(sectionID, rowID) {\n    this.setState({\n      highlightedRow: {\n        sectionID: sectionID,\n        rowID: rowID\n      }\n    });\n  },\n  render: function render() {\n    var bodyComponents = [];\n    var dataSource = this.props.dataSource;\n    var allRowIDs = dataSource.rowIdentities;\n    var rowCount = 0;\n    var stickySectionHeaderIndices = [];\n    var renderSectionHeader = this.props.renderSectionHeader;\n    var header = this.props.renderHeader && this.props.renderHeader();\n    var footer = this.props.renderFooter && this.props.renderFooter();\n    var totalIndex = header ? 1 : 0;\n\n    for (var sectionIdx = 0; sectionIdx < allRowIDs.length; sectionIdx++) {\n      var sectionID = dataSource.sectionIdentities[sectionIdx];\n      var rowIDs = allRowIDs[sectionIdx];\n\n      if (rowIDs.length === 0) {\n        if (this.props.enableEmptySections === undefined) {\n          /* $FlowFixMe(>=0.54.0 site=react_native_oss) This comment suppresses\n           * an error found when Flow v0.54 was deployed. To see the error\n           * delete this comment and run Flow. */\n          var warning = require('fbjs/lib/warning');\n\n          warning(false, 'In next release empty section headers will be rendered.' + \" In this release you can use 'enableEmptySections' flag to render empty section headers.\");\n          continue;\n        } else {\n          var invariant = require('fbjs/lib/invariant');\n\n          invariant(this.props.enableEmptySections, \"In next release 'enableEmptySections' flag will be deprecated, empty section headers will always be rendered.\" + ' If empty section headers are not desirable their indices should be excluded from sectionIDs object.' + \" In this release 'enableEmptySections' may only have value 'true' to allow empty section headers rendering.\");\n        }\n      }\n\n      if (renderSectionHeader) {\n        var element = renderSectionHeader(dataSource.getSectionHeaderData(sectionIdx), sectionID);\n\n        if (element) {\n          bodyComponents.push(React.cloneElement(element, {\n            key: 's_' + sectionID\n          }));\n\n          if (this.props.stickySectionHeadersEnabled) {\n            stickySectionHeaderIndices.push(totalIndex);\n          }\n\n          totalIndex++;\n        }\n      }\n\n      for (var rowIdx = 0; rowIdx < rowIDs.length; rowIdx++) {\n        var rowID = rowIDs[rowIdx];\n        var comboID = sectionID + '_' + rowID;\n        var shouldUpdateRow = rowCount >= this._prevRenderedRowsCount && dataSource.rowShouldUpdate(sectionIdx, rowIdx);\n        var row = React.createElement(StaticRenderer, {\n          key: 'r_' + comboID,\n          shouldUpdate: !!shouldUpdateRow,\n          render: this.props.renderRow.bind(null, dataSource.getRowData(sectionIdx, rowIdx), sectionID, rowID, this._onRowHighlighted)\n        });\n        bodyComponents.push(row);\n        totalIndex++;\n\n        if (this.props.renderSeparator && (rowIdx !== rowIDs.length - 1 || sectionIdx === allRowIDs.length - 1)) {\n          var adjacentRowHighlighted = this.state.highlightedRow.sectionID === sectionID && (this.state.highlightedRow.rowID === rowID || this.state.highlightedRow.rowID === rowIDs[rowIdx + 1]);\n          var separator = this.props.renderSeparator(sectionID, rowID, adjacentRowHighlighted);\n\n          if (separator) {\n            bodyComponents.push(React.createElement(View, {\n              key: 's_' + comboID\n            }, separator));\n            totalIndex++;\n          }\n        }\n\n        if (++rowCount === this.state.curRenderedRowsCount) {\n          break;\n        }\n      }\n\n      if (rowCount >= this.state.curRenderedRowsCount) {\n        break;\n      }\n    }\n\n    var _this$props = this.props,\n        renderScrollComponent = _this$props.renderScrollComponent,\n        props = _objectWithoutPropertiesLoose(_this$props, [\"renderScrollComponent\"]);\n\n    if (!props.scrollEventThrottle) {\n      props.scrollEventThrottle = DEFAULT_SCROLL_CALLBACK_THROTTLE;\n    }\n\n    if (props.removeClippedSubviews === undefined) {\n      props.removeClippedSubviews = true;\n    }\n\n    Object.assign(props, {\n      onScroll: this._onScroll,\n      stickyHeaderIndices: this.props.stickyHeaderIndices.concat(stickySectionHeaderIndices),\n      // Do not pass these events downstream to ScrollView since they will be\n      // registered in ListView's own ScrollResponder.Mixin\n      onKeyboardWillShow: undefined,\n      onKeyboardWillHide: undefined,\n      onKeyboardDidShow: undefined,\n      onKeyboardDidHide: undefined\n    });\n    return cloneReferencedElement(renderScrollComponent(props), {\n      ref: this._setScrollComponentRef,\n      onContentSizeChange: this._onContentSizeChange,\n      onLayout: this._onLayout,\n      DEPRECATED_sendUpdatedChildFrames: typeof props.onChangeVisibleRows !== undefined\n    }, header, bodyComponents, footer);\n  },\n\n  /**\n   * Private methods\n   */\n  _measureAndUpdateScrollProps: function _measureAndUpdateScrollProps() {\n    var scrollComponent = this.getScrollResponder();\n\n    if (!scrollComponent || !scrollComponent.getInnerViewNode) {\n      return;\n    } // RCTScrollViewManager.calculateChildFrames is not available on\n    // every platform\n\n\n    RCTScrollViewManager && RCTScrollViewManager.calculateChildFrames && RCTScrollViewManager.calculateChildFrames(findNodeHandle(scrollComponent), this._updateVisibleRows);\n  },\n  _setScrollComponentRef: function _setScrollComponentRef(scrollComponent) {\n    this._scrollComponent = scrollComponent;\n  },\n  _onContentSizeChange: function _onContentSizeChange(width, height) {\n    var contentLength = !this.props.horizontal ? height : width;\n\n    if (contentLength !== this.scrollProperties.contentLength) {\n      this.scrollProperties.contentLength = contentLength;\n\n      this._updateVisibleRows();\n\n      this._renderMoreRowsIfNeeded();\n    }\n\n    this.props.onContentSizeChange && this.props.onContentSizeChange(width, height);\n  },\n  _onLayout: function _onLayout(event) {\n    var _event$nativeEvent$la = event.nativeEvent.layout,\n        width = _event$nativeEvent$la.width,\n        height = _event$nativeEvent$la.height;\n    var visibleLength = !this.props.horizontal ? height : width;\n\n    if (visibleLength !== this.scrollProperties.visibleLength) {\n      this.scrollProperties.visibleLength = visibleLength;\n\n      this._updateVisibleRows();\n\n      this._renderMoreRowsIfNeeded();\n    }\n\n    this.props.onLayout && this.props.onLayout(event);\n  },\n  _maybeCallOnEndReached: function _maybeCallOnEndReached(event) {\n    if (this.props.onEndReached && this.scrollProperties.contentLength !== this._sentEndForContentLength && this._getDistanceFromEnd(this.scrollProperties) < this.props.onEndReachedThreshold && this.state.curRenderedRowsCount === (this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount())) {\n      this._sentEndForContentLength = this.scrollProperties.contentLength;\n      this.props.onEndReached(event);\n      return true;\n    }\n\n    return false;\n  },\n  _renderMoreRowsIfNeeded: function _renderMoreRowsIfNeeded() {\n    if (this.scrollProperties.contentLength === null || this.scrollProperties.visibleLength === null || this.state.curRenderedRowsCount === (this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount())) {\n      this._maybeCallOnEndReached();\n\n      return;\n    }\n\n    var distanceFromEnd = this._getDistanceFromEnd(this.scrollProperties);\n\n    if (distanceFromEnd < this.props.scrollRenderAheadDistance) {\n      this._pageInNewRows();\n    }\n  },\n  _pageInNewRows: function _pageInNewRows() {\n    var _this4 = this;\n\n    this.setState(function (state, props) {\n      var rowsToRender = Math.min(state.curRenderedRowsCount + props.pageSize, props.enableEmptySections ? props.dataSource.getRowAndSectionCount() : props.dataSource.getRowCount());\n      _this4._prevRenderedRowsCount = state.curRenderedRowsCount;\n      return {\n        curRenderedRowsCount: rowsToRender\n      };\n    }, function () {\n      _this4._measureAndUpdateScrollProps();\n\n      _this4._prevRenderedRowsCount = _this4.state.curRenderedRowsCount;\n    });\n  },\n  _getDistanceFromEnd: function _getDistanceFromEnd(scrollProperties) {\n    return scrollProperties.contentLength - scrollProperties.visibleLength - scrollProperties.offset;\n  },\n  _updateVisibleRows: function _updateVisibleRows(updatedFrames) {\n    var _this5 = this;\n\n    if (!this.props.onChangeVisibleRows) {\n      return; // No need to compute visible rows if there is no callback\n    }\n\n    if (updatedFrames) {\n      updatedFrames.forEach(function (newFrame) {\n        _this5._childFrames[newFrame.index] = merge(newFrame);\n      });\n    }\n\n    var isVertical = !this.props.horizontal;\n    var dataSource = this.props.dataSource;\n    var visibleMin = this.scrollProperties.offset;\n    var visibleMax = visibleMin + this.scrollProperties.visibleLength;\n    var allRowIDs = dataSource.rowIdentities;\n    var header = this.props.renderHeader && this.props.renderHeader();\n    var totalIndex = header ? 1 : 0;\n    var visibilityChanged = false;\n    var changedRows = {};\n\n    for (var sectionIdx = 0; sectionIdx < allRowIDs.length; sectionIdx++) {\n      var rowIDs = allRowIDs[sectionIdx];\n\n      if (rowIDs.length === 0) {\n        continue;\n      }\n\n      var sectionID = dataSource.sectionIdentities[sectionIdx];\n\n      if (this.props.renderSectionHeader) {\n        totalIndex++;\n      }\n\n      var visibleSection = this._visibleRows[sectionID];\n\n      if (!visibleSection) {\n        visibleSection = {};\n      }\n\n      for (var rowIdx = 0; rowIdx < rowIDs.length; rowIdx++) {\n        var rowID = rowIDs[rowIdx];\n        var frame = this._childFrames[totalIndex];\n        totalIndex++;\n\n        if (this.props.renderSeparator && (rowIdx !== rowIDs.length - 1 || sectionIdx === allRowIDs.length - 1)) {\n          totalIndex++;\n        }\n\n        if (!frame) {\n          break;\n        }\n\n        var rowVisible = visibleSection[rowID];\n        var min = isVertical ? frame.y : frame.x;\n        var max = min + (isVertical ? frame.height : frame.width);\n\n        if (!min && !max || min === max) {\n          break;\n        }\n\n        if (min > visibleMax || max < visibleMin) {\n          if (rowVisible) {\n            visibilityChanged = true;\n            delete visibleSection[rowID];\n\n            if (!changedRows[sectionID]) {\n              changedRows[sectionID] = {};\n            }\n\n            changedRows[sectionID][rowID] = false;\n          }\n        } else if (!rowVisible) {\n          visibilityChanged = true;\n          visibleSection[rowID] = true;\n\n          if (!changedRows[sectionID]) {\n            changedRows[sectionID] = {};\n          }\n\n          changedRows[sectionID][rowID] = true;\n        }\n      }\n\n      if (!isEmpty(visibleSection)) {\n        this._visibleRows[sectionID] = visibleSection;\n      } else if (this._visibleRows[sectionID]) {\n        delete this._visibleRows[sectionID];\n      }\n    }\n\n    visibilityChanged && this.props.onChangeVisibleRows(this._visibleRows, changedRows);\n  },\n  _onScroll: function _onScroll(e) {\n    var isVertical = !this.props.horizontal;\n    this.scrollProperties.visibleLength = e.nativeEvent.layoutMeasurement[isVertical ? 'height' : 'width'];\n    this.scrollProperties.contentLength = e.nativeEvent.contentSize[isVertical ? 'height' : 'width'];\n    this.scrollProperties.offset = e.nativeEvent.contentOffset[isVertical ? 'y' : 'x'];\n\n    this._updateVisibleRows(e.nativeEvent.updatedChildFrames);\n\n    if (!this._maybeCallOnEndReached(e)) {\n      this._renderMoreRowsIfNeeded();\n    }\n\n    if (this.props.onEndReached && this._getDistanceFromEnd(this.scrollProperties) > this.props.onEndReachedThreshold) {\n      // Scrolled out of the end zone, so it should be able to trigger again.\n      this._sentEndForContentLength = null;\n    }\n\n    this.props.onScroll && this.props.onScroll(e);\n  }\n});\nexport default ListView;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}