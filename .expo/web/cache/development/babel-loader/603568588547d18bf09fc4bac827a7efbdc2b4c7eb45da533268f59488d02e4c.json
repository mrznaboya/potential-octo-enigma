{"ast":null,"code":"function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nimport NativeEventEmitter from \"react-native-web/dist/exports/NativeEventEmitter\";\nimport ExponentSpeech from \"./ExponentSpeech\";\nimport { UnavailabilityError } from '@unimodules/core';\nimport { VoiceQuality } from \"./Speech.types\";\nvar SpeechEventEmitter = ExponentSpeech && new NativeEventEmitter(ExponentSpeech);\nexport { VoiceQuality };\nvar _CALLBACKS = {};\nvar _nextCallbackId = 1;\nvar _didSetListeners = false;\nfunction _unregisterListenersIfNeeded() {\n  if (Object.keys(_CALLBACKS).length === 0) {\n    removeSpeakingListener('Exponent.speakingStarted');\n    removeSpeakingListener('Exponent.speakingDone');\n    removeSpeakingListener('Exponent.speakingStopped');\n    removeSpeakingListener('Exponent.speakingError');\n    _didSetListeners = false;\n  }\n}\nfunction _registerListenersIfNeeded() {\n  if (_didSetListeners) return;\n  _didSetListeners = true;\n  setSpeakingListener('Exponent.speakingStarted', _ref => {\n    var {\n      id\n    } = _ref;\n    var options = _CALLBACKS[id];\n    if (options && options.onStart) {\n      options.onStart();\n    }\n  });\n  setSpeakingListener('Exponent.speakingDone', _ref2 => {\n    var {\n      id\n    } = _ref2;\n    var options = _CALLBACKS[id];\n    if (options && options.onDone) {\n      options.onDone();\n    }\n    delete _CALLBACKS[id];\n    _unregisterListenersIfNeeded();\n  });\n  setSpeakingListener('Exponent.speakingStopped', _ref3 => {\n    var {\n      id\n    } = _ref3;\n    var options = _CALLBACKS[id];\n    if (options && options.onStopped) {\n      options.onStopped();\n    }\n    delete _CALLBACKS[id];\n    _unregisterListenersIfNeeded();\n  });\n  setSpeakingListener('Exponent.speakingError', _ref4 => {\n    var {\n      id,\n      error\n    } = _ref4;\n    var options = _CALLBACKS[id];\n    if (options && options.onError) {\n      options.onError(new Error(error));\n    }\n    delete _CALLBACKS[id];\n    _unregisterListenersIfNeeded();\n  });\n}\nexport function speak(text) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var id = _nextCallbackId++;\n  _CALLBACKS[id] = options;\n  _registerListenersIfNeeded();\n  ExponentSpeech.speak(String(id), text, options);\n}\nexport function getAvailableVoicesAsync() {\n  return _getAvailableVoicesAsync.apply(this, arguments);\n}\nfunction _getAvailableVoicesAsync() {\n  _getAvailableVoicesAsync = _asyncToGenerator(function* () {\n    if (!ExponentSpeech.getVoices) {\n      throw new UnavailabilityError('Speech', 'getVoices');\n    }\n    return ExponentSpeech.getVoices();\n  });\n  return _getAvailableVoicesAsync.apply(this, arguments);\n}\nexport function isSpeakingAsync() {\n  return _isSpeakingAsync.apply(this, arguments);\n}\nfunction _isSpeakingAsync() {\n  _isSpeakingAsync = _asyncToGenerator(function* () {\n    return ExponentSpeech.isSpeaking();\n  });\n  return _isSpeakingAsync.apply(this, arguments);\n}\nexport function stop() {\n  return _stop.apply(this, arguments);\n}\nfunction _stop() {\n  _stop = _asyncToGenerator(function* () {\n    return ExponentSpeech.stop();\n  });\n  return _stop.apply(this, arguments);\n}\nexport function pause() {\n  return _pause.apply(this, arguments);\n}\nfunction _pause() {\n  _pause = _asyncToGenerator(function* () {\n    if (!ExponentSpeech.pause) {\n      throw new UnavailabilityError('Speech', 'pause');\n    }\n    return ExponentSpeech.pause();\n  });\n  return _pause.apply(this, arguments);\n}\nexport function resume() {\n  return _resume.apply(this, arguments);\n}\nfunction _resume() {\n  _resume = _asyncToGenerator(function* () {\n    if (!ExponentSpeech.resume) {\n      throw new UnavailabilityError('Speech', 'resume');\n    }\n    return ExponentSpeech.resume();\n  });\n  return _resume.apply(this, arguments);\n}\nfunction setSpeakingListener(eventName, callback) {\n  if (SpeechEventEmitter.listeners(eventName).length > 0) {\n    SpeechEventEmitter.removeAllListeners(eventName);\n  }\n  SpeechEventEmitter.addListener(eventName, callback);\n}\nfunction removeSpeakingListener(eventName) {\n  SpeechEventEmitter.removeAllListeners(eventName);\n}","map":{"version":3,"names":["ExponentSpeech","UnavailabilityError","VoiceQuality","SpeechEventEmitter","NativeEventEmitter","_CALLBACKS","_nextCallbackId","_didSetListeners","_unregisterListenersIfNeeded","Object","keys","length","removeSpeakingListener","_registerListenersIfNeeded","setSpeakingListener","_ref","id","options","onStart","_ref2","onDone","_ref3","onStopped","_ref4","error","onError","Error","speak","text","arguments","undefined","String","getAvailableVoicesAsync","_getAvailableVoicesAsync","apply","_asyncToGenerator","getVoices","isSpeakingAsync","_isSpeakingAsync","isSpeaking","stop","_stop","pause","_pause","resume","_resume","eventName","callback","listeners","removeAllListeners","addListener"],"sources":["/Users/zuyax/Developer/rn-starter/node_modules/expo-speech/src/Speech/Speech.ts"],"sourcesContent":["import { NativeEventEmitter } from 'react-native';\nimport ExponentSpeech from './ExponentSpeech';\nimport { UnavailabilityError } from '@unimodules/core';\nimport { SpeechOptions, VoiceQuality, Voice } from './Speech.types';\n\nconst SpeechEventEmitter = ExponentSpeech && new NativeEventEmitter(ExponentSpeech);\n\nexport { VoiceQuality };\nexport { Voice };\n\nconst _CALLBACKS = {};\nlet _nextCallbackId = 1;\nlet _didSetListeners = false;\n\nfunction _unregisterListenersIfNeeded() {\n  if (Object.keys(_CALLBACKS).length === 0) {\n    removeSpeakingListener('Exponent.speakingStarted');\n    removeSpeakingListener('Exponent.speakingDone');\n    removeSpeakingListener('Exponent.speakingStopped');\n    removeSpeakingListener('Exponent.speakingError');\n    _didSetListeners = false;\n  }\n}\n\nfunction _registerListenersIfNeeded() {\n  if (_didSetListeners) return;\n  _didSetListeners = true;\n  setSpeakingListener('Exponent.speakingStarted', ({ id }) => {\n    const options = _CALLBACKS[id];\n    if (options && options.onStart) {\n      options.onStart();\n    }\n  });\n  setSpeakingListener('Exponent.speakingDone', ({ id }) => {\n    const options = _CALLBACKS[id];\n    if (options && options.onDone) {\n      options.onDone();\n    }\n    delete _CALLBACKS[id];\n    _unregisterListenersIfNeeded();\n  });\n  setSpeakingListener('Exponent.speakingStopped', ({ id }) => {\n    const options = _CALLBACKS[id];\n    if (options && options.onStopped) {\n      options.onStopped();\n    }\n    delete _CALLBACKS[id];\n    _unregisterListenersIfNeeded();\n  });\n  setSpeakingListener('Exponent.speakingError', ({ id, error }) => {\n    const options = _CALLBACKS[id];\n    if (options && options.onError) {\n      options.onError(new Error(error));\n    }\n    delete _CALLBACKS[id];\n    _unregisterListenersIfNeeded();\n  });\n}\n\nexport function speak(text: string, options: SpeechOptions = {}) {\n  const id = _nextCallbackId++;\n  _CALLBACKS[id] = options;\n  _registerListenersIfNeeded();\n  ExponentSpeech.speak(String(id), text, options);\n}\n\nexport async function getAvailableVoicesAsync(): Promise<Voice[]> {\n  if (!ExponentSpeech.getVoices) {\n    throw new UnavailabilityError('Speech', 'getVoices');\n  }\n  return ExponentSpeech.getVoices();\n}\n\nexport async function isSpeakingAsync(): Promise<boolean> {\n  return ExponentSpeech.isSpeaking();\n}\n\nexport async function stop(): Promise<void> {\n  return ExponentSpeech.stop();\n}\n\nexport async function pause(): Promise<void> {\n  if (!ExponentSpeech.pause) {\n    throw new UnavailabilityError('Speech', 'pause');\n  }\n  return ExponentSpeech.pause();\n}\n\nexport async function resume(): Promise<void> {\n  if (!ExponentSpeech.resume) {\n    throw new UnavailabilityError('Speech', 'resume');\n  }\n\n  return ExponentSpeech.resume();\n}\n\nfunction setSpeakingListener(eventName, callback) {\n  if (SpeechEventEmitter.listeners(eventName).length > 0) {\n    SpeechEventEmitter.removeAllListeners(eventName);\n  }\n  SpeechEventEmitter.addListener(eventName, callback);\n}\n\nfunction removeSpeakingListener(eventName) {\n  SpeechEventEmitter.removeAllListeners(eventName);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}