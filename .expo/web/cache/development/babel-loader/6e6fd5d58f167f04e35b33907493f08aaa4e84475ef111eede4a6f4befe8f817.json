{"ast":null,"code":"var _jsxFileName = \"/Users/zuyax/Developer/rn-starter/node_modules/expo-camera/build/ExponentCamera.web.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nimport React from 'react';\nimport findNodeHandle from \"react-native-web/dist/exports/findNodeHandle\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport CameraModule from \"./CameraModule/CameraModule\";\nimport CameraManager from \"./ExponentCameraManager.web\";\nexport default class ExponentCamera extends React.Component {\n  constructor() {\n    var _this;\n    super(...arguments);\n    _this = this;\n    this.state = {\n      type: null\n    };\n    this._updateCameraProps = function () {\n      var _ref2 = _asyncToGenerator(function* (_ref) {\n        var {\n          type,\n          zoom,\n          pictureSize,\n          flashMode,\n          autoFocus,\n          whiteBalance\n        } = _ref;\n        var {\n          camera\n        } = _this;\n        if (!camera) {\n          return;\n        }\n        yield Promise.all([camera.setTypeAsync(type), camera.setPictureSize(pictureSize), camera.setZoomAsync(zoom), camera.setAutoFocusAsync(autoFocus), camera.setWhiteBalanceAsync(whiteBalance), camera.setFlashModeAsync(flashMode), camera.ensureCameraIsRunningAsync()]);\n        var actualCameraType = camera.getActualCameraType();\n        if (actualCameraType !== _this.state.type) {\n          _this.setState({\n            type: actualCameraType\n          });\n        }\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    this.getCamera = () => {\n      if (this.camera) {\n        return this.camera;\n      }\n      throw new Error('Camera is not defined yet!');\n    };\n    this.getAvailablePictureSizes = function () {\n      var _ref3 = _asyncToGenerator(function* (ratio) {\n        var camera = _this.getCamera();\n        return camera.getAvailablePictureSizes(ratio);\n      });\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    this.takePicture = function () {\n      var _ref4 = _asyncToGenerator(function* (options) {\n        var camera = _this.getCamera();\n        return camera.takePicture(_objectSpread({}, options, {\n          onPictureSaved: _this.props.onPictureSaved\n        }));\n      });\n      return function (_x3) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n    this.resumePreview = _asyncToGenerator(function* () {\n      var camera = _this.getCamera();\n      yield camera.resumePreview();\n    });\n    this.pausePreview = () => {\n      var camera = this.getCamera();\n      camera.pausePreview();\n    };\n    this.onCameraReady = () => {\n      if (this.props.onCameraReady) {\n        this.props.onCameraReady();\n      }\n    };\n    this.onMountError = _ref6 => {\n      var {\n        nativeEvent\n      } = _ref6;\n      if (this.props.onMountError) {\n        this.props.onMountError({\n          nativeEvent\n        });\n      }\n    };\n    this._setRef = ref => {\n      if (!ref) {\n        this.video = null;\n        if (this.camera) {\n          this.camera.unmount();\n          this.camera = undefined;\n        }\n        return;\n      }\n      this.video = findNodeHandle(ref);\n      this.camera = new CameraModule(ref);\n      this.camera.onCameraReady = this.onCameraReady;\n      this.camera.onMountError = this.onMountError;\n      this._updateCameraProps(this.props);\n    };\n  }\n  componentWillUnmount() {\n    if (this.camera) {\n      this.camera.unmount();\n    }\n  }\n  componentWillReceiveProps(nextProps) {\n    this._updateCameraProps(nextProps);\n  }\n  render() {\n    var transform = this.state.type === CameraManager.Type.front ? 'rotateY(180deg)' : 'none';\n    var style = {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      width: '100%',\n      height: '100%',\n      objectFit: 'cover',\n      transform\n    };\n    return React.createElement(View, {\n      style: [styles.videoWrapper, this.props.style],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      }\n    }, React.createElement(\"video\", {\n      ref: this._setRef,\n      style: style,\n      autoPlay: true,\n      playsInline: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      }\n    }), this.props.children);\n  }\n}\nvar styles = StyleSheet.create({\n  videoWrapper: {\n    flex: 1,\n    alignItems: 'stretch'\n  }\n});","map":{"version":3,"names":["React","findNodeHandle","StyleSheet","View","CameraModule","CameraManager","ExponentCamera","Component","constructor","_this","state","type","_updateCameraProps","_ref2","_asyncToGenerator","_ref","zoom","pictureSize","flashMode","autoFocus","whiteBalance","camera","Promise","all","setTypeAsync","setPictureSize","setZoomAsync","setAutoFocusAsync","setWhiteBalanceAsync","setFlashModeAsync","ensureCameraIsRunningAsync","actualCameraType","getActualCameraType","setState","_x","apply","arguments","getCamera","Error","getAvailablePictureSizes","_ref3","ratio","_x2","takePicture","_ref4","options","_objectSpread","onPictureSaved","props","_x3","resumePreview","pausePreview","onCameraReady","onMountError","_ref6","nativeEvent","_setRef","ref","video","unmount","undefined","componentWillUnmount","componentWillReceiveProps","nextProps","render","transform","Type","front","style","position","top","left","right","bottom","width","height","objectFit","createElement","styles","videoWrapper","__source","fileName","_jsxFileName","lineNumber","autoPlay","playsInline","children","create","flex","alignItems"],"sources":["/Users/zuyax/Developer/rn-starter/node_modules/expo-camera/src/ExponentCamera.web.tsx"],"sourcesContent":["import React, { CSSProperties } from 'react';\nimport { findNodeHandle, StyleSheet, View } from 'react-native';\nimport { CapturedPicture, NativeProps, PictureOptions, MountError } from './Camera.types';\nimport CameraModule, { CameraType } from './CameraModule/CameraModule';\nimport CameraManager from './ExponentCameraManager.web';\n\nexport default class ExponentCamera extends React.Component<NativeProps> {\n  video?: number | null;\n  camera?: CameraModule;\n\n  state = { type: null };\n\n  componentWillUnmount() {\n    if (this.camera) {\n      this.camera.unmount();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this._updateCameraProps(nextProps);\n  }\n\n  _updateCameraProps = async ({\n    type,\n    zoom,\n    pictureSize,\n    flashMode,\n    autoFocus,\n    // focusDepth,\n    whiteBalance,\n  }: NativeProps) => {\n    const { camera } = this;\n    if (!camera) {\n      return;\n    }\n    await Promise.all([\n      camera.setTypeAsync(type as CameraType),\n      camera.setPictureSize(pictureSize as string),\n      camera.setZoomAsync(zoom as number),\n      camera.setAutoFocusAsync(autoFocus as string),\n      camera.setWhiteBalanceAsync(whiteBalance as string),\n      camera.setFlashModeAsync(flashMode as string),\n      camera.ensureCameraIsRunningAsync(),\n    ]);\n    const actualCameraType = camera.getActualCameraType();\n    if (actualCameraType !== this.state.type) {\n      this.setState({ type: actualCameraType });\n    }\n  };\n\n  getCamera = (): CameraModule => {\n    if (this.camera) {\n      return this.camera;\n    }\n    throw new Error('Camera is not defined yet!');\n  };\n\n  getAvailablePictureSizes = async (ratio: string): Promise<string[]> => {\n    const camera = this.getCamera();\n    return camera.getAvailablePictureSizes(ratio);\n  };\n\n  takePicture = async (options: PictureOptions): Promise<CapturedPicture> => {\n    const camera = this.getCamera();\n    return camera.takePicture({\n      ...options,\n      // This will always be defined, the option gets added to a queue in the upper-level. We should replace the original so it isn't called twice.\n      onPictureSaved: this.props.onPictureSaved,\n    });\n  };\n\n  resumePreview = async (): Promise<void> => {\n    const camera = this.getCamera();\n    await camera.resumePreview();\n  };\n\n  pausePreview = (): void => {\n    const camera = this.getCamera();\n    camera.pausePreview();\n  };\n\n  onCameraReady = () => {\n    if (this.props.onCameraReady) {\n      this.props.onCameraReady();\n    }\n  };\n\n  onMountError = ({ nativeEvent }: { nativeEvent: MountError }) => {\n    if (this.props.onMountError) {\n      this.props.onMountError({ nativeEvent });\n    }\n  };\n\n  _setRef = ref => {\n    if (!ref) {\n      this.video = null;\n      if (this.camera) {\n        this.camera.unmount();\n        this.camera = undefined;\n      }\n      return;\n    }\n    this.video = findNodeHandle(ref);\n    this.camera = new CameraModule(ref);\n    this.camera.onCameraReady = this.onCameraReady;\n    this.camera.onMountError = this.onMountError;\n    this._updateCameraProps(this.props);\n  };\n\n  render() {\n    const transform = this.state.type === CameraManager.Type.front ? 'rotateY(180deg)' : 'none';\n    const style: CSSProperties = {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      width: '100%',\n      height: '100%',\n      objectFit: 'cover',\n      transform,\n    };\n\n    return (\n      <View style={[styles.videoWrapper, this.props.style]}>\n        <video ref={this._setRef} style={style} autoPlay playsInline />\n        {this.props.children}\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  videoWrapper: {\n    flex: 1,\n    alignItems: 'stretch',\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}