{"ast":null,"code":"function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nimport { UnavailabilityError } from '@unimodules/core';\nimport ExpoGoogleSignIn from \"./ExpoGoogleSignIn\";\nimport GoogleAuthentication from \"./GoogleAuthentication\";\nimport GoogleIdentity from \"./GoogleIdentity\";\nclass GoogleUser extends GoogleIdentity {\n  constructor(options) {\n    var _this;\n    super(options);\n    _this = this;\n    this.clearCache = _asyncToGenerator(function* () {\n      if (!ExpoGoogleSignIn.clearCacheAsync) {\n        return;\n      }\n      if (!_this.auth || !_this.auth.accessToken) {\n        throw new Error('GoogleSignIn: GoogleUser.clearCache(): Invalid accessToken');\n      }\n      return yield ExpoGoogleSignIn.clearCacheAsync({\n        token: _this.auth.accessToken\n      });\n    });\n    this.getHeaders = () => {\n      if (!this.auth || !this.auth.accessToken || !this.auth.accessToken.length) {\n        throw new Error('GoogleSignIn: GoogleUser.getHeaders(): Invalid accessToken');\n      }\n      return {\n        Authorization: \"Bearer \".concat(this.auth.accessToken),\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      };\n    };\n    this.refreshAuth = _asyncToGenerator(function* () {\n      if (!ExpoGoogleSignIn.getTokensAsync) {\n        throw new UnavailabilityError('GoogleSignIn', 'getTokensAsync');\n      }\n      var response = yield ExpoGoogleSignIn.getTokensAsync(false);\n      if (response.idToken == null && _this.auth) {\n        response.idToken = _this.auth.idToken;\n      }\n      if (!_this.auth) {\n        _this.auth = new GoogleAuthentication(response);\n      } else {\n        _this.auth.idToken = response.idToken;\n        _this.auth.accessToken = response.accessToken;\n      }\n      return _this.auth;\n    });\n    var {\n      auth,\n      scopes,\n      hostedDomain,\n      serverAuthCode\n    } = options;\n    this.auth = auth;\n    this.scopes = scopes;\n    this.hostedDomain = hostedDomain;\n    this.serverAuthCode = serverAuthCode;\n  }\n  equals(other) {\n    if (!super.equals(other) || !(other instanceof GoogleUser)) {\n      return false;\n    }\n    if (this.auth != null) {\n      return this.auth.equals(other.auth) && this.scopes === other.scopes && this.hostedDomain === other.hostedDomain && this.serverAuthCode === other.serverAuthCode;\n    } else {\n      return other.auth == null;\n    }\n  }\n  toJSON() {\n    var auth = this.auth;\n    if (this.auth && this.auth.toJSON) {\n      auth = this.auth.toJSON();\n    }\n    return _objectSpread({}, super.toJSON(), {\n      auth,\n      scopes: this.scopes,\n      hostedDomain: this.hostedDomain,\n      serverAuthCode: this.serverAuthCode\n    });\n  }\n}\nexport default GoogleUser;","map":{"version":3,"names":["UnavailabilityError","ExpoGoogleSignIn","GoogleAuthentication","GoogleIdentity","GoogleUser","constructor","options","_this","this","clearCache","_asyncToGenerator","clearCacheAsync","auth","accessToken","Error","token","getHeaders","length","Authorization","concat","Accept","refreshAuth","getTokensAsync","response","idToken","scopes","hostedDomain","serverAuthCode","equals","other","toJSON","_objectSpread"],"sources":["/Users/zuyax/Developer/rn-starter/node_modules/expo-google-sign-in/src/GoogleUser.ts"],"sourcesContent":["import { UnavailabilityError } from '@unimodules/core';\nimport invariant from 'invariant';\n\nimport ExpoGoogleSignIn from './ExpoGoogleSignIn';\nimport GoogleAuthentication from './GoogleAuthentication';\nimport GoogleIdentity from './GoogleIdentity';\n\nclass GoogleUser extends GoogleIdentity {\n  auth: GoogleAuthentication | null;\n  scopes: string[];\n  hostedDomain?: string;\n  serverAuthCode?: string;\n\n  constructor(options) {\n    super(options);\n    const { auth, scopes, hostedDomain, serverAuthCode } = options;\n\n    this.auth = auth;\n    this.scopes = scopes;\n    this.hostedDomain = hostedDomain;\n    this.serverAuthCode = serverAuthCode;\n  }\n\n  clearCache = async () => {\n    if (!ExpoGoogleSignIn.clearCacheAsync) {\n      return;\n    }\n    if (!this.auth || !this.auth.accessToken) {\n      throw new Error('GoogleSignIn: GoogleUser.clearCache(): Invalid accessToken');\n    }\n    return await ExpoGoogleSignIn.clearCacheAsync({ token: this.auth.accessToken });\n  };\n\n  getHeaders = (): {\n    [key: string]: string;\n  } => {\n    if (!this.auth || !this.auth.accessToken || !this.auth.accessToken.length) {\n      throw new Error('GoogleSignIn: GoogleUser.getHeaders(): Invalid accessToken');\n    }\n    return {\n      Authorization: `Bearer ${this.auth.accessToken}`,\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    };\n  };\n\n  refreshAuth = async (): Promise<GoogleAuthentication | null> => {\n    if (!ExpoGoogleSignIn.getTokensAsync) {\n      throw new UnavailabilityError('GoogleSignIn', 'getTokensAsync');\n    }\n    const response: {\n      idToken?: string;\n      accessToken?: string;\n      auth?: {\n        accessToken?: string;\n      };\n    } = await ExpoGoogleSignIn.getTokensAsync(false);\n    if (response.idToken == null && this.auth) {\n      response.idToken = this.auth.idToken;\n    }\n    if (!this.auth) {\n      this.auth = new GoogleAuthentication(response);\n    } else {\n      this.auth.idToken = response.idToken;\n      this.auth.accessToken = response.accessToken;\n    }\n    return this.auth;\n  };\n\n  equals(other: any): boolean {\n    if (!super.equals(other) || !(other instanceof GoogleUser)) {\n      return false;\n    }\n\n    if (this.auth != null) {\n      return (\n        this.auth.equals(other.auth) &&\n        this.scopes === other.scopes &&\n        this.hostedDomain === other.hostedDomain &&\n        this.serverAuthCode === other.serverAuthCode\n      );\n    } else {\n      return other.auth == null;\n    }\n  }\n\n  toJSON(): { [key: string]: any } {\n    let auth: any = this.auth;\n    if (this.auth && this.auth.toJSON) {\n      auth = this.auth.toJSON();\n    }\n\n    return {\n      ...super.toJSON(),\n      auth,\n      scopes: this.scopes,\n      hostedDomain: this.hostedDomain,\n      serverAuthCode: this.serverAuthCode,\n    };\n  }\n}\n\nexport default GoogleUser;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}